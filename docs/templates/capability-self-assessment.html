<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Capability Self-Assessment - ECONAN</title>
    <style>
        :root {
            /* Colors */
            --color-primary-50: #E6F0F8;
            --color-primary-600: #0F4C81;
            --color-primary-700: #0A3A64;
            --color-primary-800: #082F52;
            --color-success-600: #16A34A;
            --color-success-700: #15803D;
            --color-warning-600: #F59E0B;
            --color-info-600: #0891B2;
            --color-gray-100: #F3F4F6;
            --color-gray-300: #D1D5DB;
            --color-gray-600: #4B5563;
            --color-gray-900: #111827;

            /* Typography */
            --font-family-body: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            --font-size-base: 1rem;
            --font-size-sm: 0.875rem;
            --font-size-lg: 1.125rem;
            --font-size-xl: 1.25rem;
            --font-size-2xl: 1.5rem;
            --font-size-3xl: 1.875rem;

            /* Spacing */
            --space-2: 0.5rem;
            --space-3: 0.75rem;
            --space-4: 1rem;
            --space-6: 1.5rem;
            --space-8: 2rem;

            /* Layout */
            --max-width: 210mm;
            --border-radius: 8px;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: var(--font-family-body);
            font-size: var(--font-size-base);
            line-height: 1.6;
            color: var(--color-gray-900);
            background-color: var(--color-gray-100);
            padding: var(--space-8);
        }

        .form-container {
            max-width: var(--max-width);
            margin: 0 auto;
            background-color: white;
            padding: var(--space-8);
            border-radius: var(--border-radius);
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        /* Header */
        .form-header {
            text-align: center;
            margin-bottom: var(--space-8);
            padding-bottom: var(--space-6);
            border-bottom: 3px solid var(--color-primary-600);
        }

        .form-header h1 {
            font-size: var(--font-size-3xl);
            color: var(--color-primary-700);
            margin-bottom: var(--space-2);
        }

        .form-header .subtitle {
            font-size: var(--font-size-lg);
            color: var(--color-gray-600);
            font-style: italic;
        }

        /* Instructions */
        .instruction-box {
            background-color: var(--color-primary-50);
            border-left: 4px solid var(--color-primary-600);
            padding: var(--space-4);
            margin-bottom: var(--space-6);
            border-radius: var(--border-radius);
        }

        .instruction-box h3 {
            font-size: var(--font-size-lg);
            color: var(--color-primary-800);
            margin-bottom: var(--space-2);
        }

        .instruction-box p {
            font-size: var(--font-size-sm);
            color: var(--color-gray-600);
            margin-bottom: var(--space-2);
        }

        .instruction-box ul {
            margin-left: var(--space-6);
            font-size: var(--font-size-sm);
            color: var(--color-gray-600);
        }

        /* Sections */
        .form-section {
            margin-bottom: var(--space-8);
        }

        .section-header {
            background-color: var(--color-primary-600);
            color: white;
            padding: var(--space-4);
            border-radius: var(--border-radius);
            margin-bottom: var(--space-6);
        }

        .section-header h2 {
            font-size: var(--font-size-xl);
            font-weight: 600;
        }

        .section-description {
            background-color: var(--color-gray-100);
            padding: var(--space-3);
            margin-bottom: var(--space-6);
            border-radius: var(--border-radius);
            font-size: var(--font-size-sm);
            color: var(--color-gray-600);
        }

        /* Form Fields */
        .form-field {
            margin-bottom: var(--space-6);
        }

        .form-field label {
            display: block;
            font-weight: 600;
            color: var(--color-gray-900);
            margin-bottom: var(--space-2);
        }

        .form-field input[type="text"],
        .form-field input[type="date"],
        .form-field select,
        .form-field textarea {
            width: 100%;
            padding: var(--space-3);
            border: 1px solid var(--color-gray-300);
            border-radius: var(--border-radius);
            font-size: var(--font-size-base);
            font-family: var(--font-family-body);
        }

        .form-field textarea {
            min-height: 100px;
            resize: vertical;
        }

        .form-field input:focus,
        .form-field select:focus,
        .form-field textarea:focus {
            outline: none;
            border-color: var(--color-primary-600);
            box-shadow: 0 0 0 3px var(--color-primary-50);
        }

        /* Rating Scales */
        .rating-field {
            margin-bottom: var(--space-6);
        }

        .rating-field .rating-label {
            display: block;
            font-weight: 600;
            color: var(--color-gray-900);
            margin-bottom: var(--space-3);
        }

        .rating-scale {
            display: flex;
            align-items: center;
            gap: var(--space-2);
            flex-wrap: wrap;
        }

        .rating-option {
            display: inline-flex;
            align-items: center;
            gap: var(--space-2);
            vertical-align: middle;
        }

        .rating-option input[type="radio"] {
            width: 18px;
            height: 18px;
            cursor: pointer;
        }

        .rating-option label {
            font-size: var(--font-size-sm);
            cursor: pointer;
            font-weight: normal;
        }

        .rating-labels {
            display: flex;
            justify-content: space-between;
            margin-top: var(--space-2);
            font-size: var(--font-size-sm);
            color: var(--color-gray-600);
            font-style: italic;
        }

        /* Radio Buttons */
        .radio-group {
            display: flex;
            flex-direction: column;
            gap: var(--space-2);
            margin-top: var(--space-2);
        }

        .radio-option {
            display: flex;
            align-items: center;
            gap: var(--space-2);
            padding: var(--space-3);
            border: 1px solid var(--color-gray-300);
            border-radius: var(--border-radius);
            cursor: pointer;
            transition: all 0.2s;
        }

        .radio-option:hover {
            background-color: var(--color-primary-50);
        }

        .radio-option input[type="radio"] {
            width: 18px;
            height: 18px;
            cursor: pointer;
        }

        .radio-option label {
            font-weight: normal;
            cursor: pointer;
            flex-grow: 1;
        }

        /* Buttons */
        .button-group {
            display: flex;
            gap: var(--space-4);
            margin-top: var(--space-6);
            flex-wrap: wrap;
        }

        button {
            padding: var(--space-3) var(--space-6);
            font-size: var(--font-size-base);
            font-weight: 600;
            border-radius: var(--border-radius);
            border: none;
            cursor: pointer;
            transition: all 0.2s;
        }

        .btn-primary {
            background-color: var(--color-primary-600);
            color: white;
        }

        .btn-primary:hover {
            background-color: var(--color-primary-700);
        }

        .btn-secondary {
            background-color: var(--color-gray-600);
            color: white;
        }

        .btn-secondary:hover {
            background-color: var(--color-gray-900);
        }

        .btn-danger {
            background-color: #DC2626;
            color: white;
        }

        .btn-danger:hover {
            background-color: #B91C1C;
        }

        /* Status Messages */
        .status-message {
            padding: var(--space-3);
            border-radius: var(--border-radius);
            margin-bottom: var(--space-4);
            font-size: var(--font-size-sm);
        }

        .status-success {
            background-color: #D1FAE5;
            color: var(--color-success-700);
            border-left: 4px solid var(--color-success-600);
        }

        .status-info {
            background-color: #E0F2FE;
            color: #075985;
            border-left: 4px solid var(--color-info-600);
        }

        /* Summary Section (Print Only) */
        .summary-section {
            display: none;
        }

        /* Print Styles */
        @media print {
            @page {
                size: A4;
                margin: 2cm;
            }

            body {
                background-color: white;
                padding: 0;
            }

            .form-container {
                max-width: 100%;
                box-shadow: none;
                padding: 0;
            }

            .no-print {
                display: none !important;
            }

            .summary-section {
                display: block;
                page-break-before: always;
                margin-top: var(--space-8);
            }

            .form-section {
                page-break-inside: avoid;
            }

            .rating-scale {
                page-break-inside: avoid;
            }
        }

        /* Responsive */
        @media (max-width: 768px) {
            body {
                padding: var(--space-4);
            }

            .form-container {
                padding: var(--space-4);
            }

            .rating-scale {
                flex-direction: column;
                align-items: flex-start;
            }

            .button-group {
                flex-direction: column;
            }

            button {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="form-container">
        <!-- Header -->
        <div class="form-header">
            <h1>Capability Self-Assessment</h1>
            <p class="subtitle">ECONAN - Economic Analysis | Pre-Sessie Week 1</p>
        </div>

        <!-- Instructions -->
        <div class="instruction-box no-print">
            <h3>üìã Instructies</h3>
            <p>Dit formulier helpt je (en je docent) inzicht te krijgen in je startpunt voor ECONAN. Het duurt ongeveer <strong>10 minuten</strong> om in te vullen.</p>
            <ul>
                <li>Vul het formulier eerlijk in - er zijn geen "goede" of "foute" antwoorden</li>
                <li>Je antwoorden worden automatisch opgeslagen in je browser</li>
                <li>Klik op "Print / Save as PDF" om een samenvatting te downloaden</li>
                <li><strong>‚ö†Ô∏è Neem je ingevulde formulier (geprint of op laptop) mee naar de Week 1 sessie</strong></li>
                <li>Gebruik deze assessment om jouw rol (Management of Analist) en tool path (AI of Conventional) te bepalen</li>
            </ul>
        </div>

        <!-- Status Message -->
        <div id="statusMessage" class="status-message status-info no-print" style="display: none;"></div>

        <!-- Form -->
        <form id="capabilityForm">
            <!-- Section 1: Persoonlijke Informatie -->
            <div class="form-section">
                <div class="section-header">
                    <h2>1. Persoonlijke Informatie</h2>
                </div>

                <div class="form-field">
                    <label for="naam">Voornaam *</label>
                    <input type="text" id="naam" name="naam" required>
                </div>

                <div class="form-field">
                    <label for="sector">Sector vanuit BEDROM *</label>
                    <select id="sector" name="sector" required>
                        <option value="">-- Selecteer sector --</option>
                        <option value="retail">Retail (Fashion & Consumer Goods)</option>
                        <option value="energy">Energy (Oil & Gas, Renewable)</option>
                        <option value="finance">Financial Services (Banking, Insurance)</option>
                        <option value="healthcare">Healthcare (Pharmaceuticals, Biotech)</option>
                        <option value="manufacturing">Manufacturing (Automotive)</option>
                        <option value="food">Food & Beverage (Consumer Goods)</option>
                        <option value="tech">Technology (SaaS, Cloud)</option>
                        <option value="realestate">Real Estate (Commercial REITs)</option>
                        <option value="anders">Anders</option>
                    </select>
                </div>

                <div class="form-field" id="sectorAndersField" style="display: none; margin-left: 20px;">
                    <label for="sector_anders">Specificeer sector *</label>
                    <input type="text" id="sector_anders" name="sector_anders" placeholder="Vul je sector in">
                </div>

                <div class="form-field">
                    <label for="datum">Datum *</label>
                    <input type="date" id="datum" name="datum" required>
                </div>
            </div>

            <!-- Section 2: PAM Reflectie (na video) -->
            <div class="form-section">
                <div class="section-header">
                    <h2>2. PAM Reflectie</h2>
                </div>

                <div class="section-description">
                    Na het kijken van de <a href="https://youtu.be/rrkrvAUbU9Y?si=mAD2qukKNmBNKvIY" target="_blank" rel="noopener noreferrer" style="color: var(--color-primary-600); text-decoration: underline; font-weight: var(--font-weight-semibold);">Daniel Pink "Drive" video</a> (18 min) over Purpose, Autonomy, Mastery, beantwoord de volgende reflectievragen.
                </div>

                <div class="form-field">
                    <label for="pam_dimensie">Welke dimensie (Purpose/Autonomy/Mastery) is voor jouw motivatie het belangrijkste en waarom? *</label>
                    <textarea id="pam_dimensie" name="pam_dimensie" required placeholder="Beschrijf in 2-3 zinnen welke dimensie voor jouw motivatie het belangrijkste is en leg uit waarom..." style="width: 100%; min-height: 100px; padding: var(--space-3); border: 1px solid var(--color-gray-300); border-radius: var(--border-radius); font-family: var(--font-family-body); font-size: var(--font-size-base);"></textarea>
                </div>

                <div class="form-field">
                    <label for="pam_bedrom">Hoe zie je deze dimensies (Purpose/Autonomy/Mastery) terug in jouw BEDROM ervaring? *</label>
                    <textarea id="pam_bedrom" name="pam_bedrom" required placeholder="Beschrijf in 2-3 zinnen hoe je Purpose, Autonomy en Mastery hebt ervaren tijdens BEDROM..." style="width: 100%; min-height: 100px; padding: var(--space-3); border: 1px solid var(--color-gray-300); border-radius: var(--border-radius); font-family: var(--font-family-body); font-size: var(--font-size-base);"></textarea>
                </div>

                <div class="form-field">
                    <label for="pam_econan">Wat zou jou het meest motiveren in ECONAN? *</label>
                    <textarea id="pam_econan" name="pam_econan" required placeholder="Beschrijf in 2-3 zinnen wat jou het meest zou motiveren tijdens ECONAN..." style="width: 100%; min-height: 100px; padding: var(--space-3); border: 1px solid var(--color-gray-300); border-radius: var(--border-radius); font-family: var(--font-family-body); font-size: var(--font-size-base);"></textarea>
                </div>
            </div>

            <!-- Section 3: Data-Analyse Ervaring -->
            <div class="form-section">
                <div class="section-header">
                    <h2>3. Data-Analyse Ervaring</h2>
                </div>

                <div class="section-description">
                    Beoordeel je ervaring met de volgende data-analyse tools en technieken op een schaal van Geen tot Expert.
                </div>

                <div class="rating-field">
                    <span class="rating-label">Excel (formules, pivot tables, grafieken) *</span>
                    <div class="rating-scale">
                        <div class="rating-option">
                            <input type="radio" id="excel1" name="excel" value="1" required>
                            <label for="excel1">Geen</label>
                        </div>
                        <div class="rating-option">
                            <input type="radio" id="excel2" name="excel" value="2">
                            <label for="excel2">Basis</label>
                        </div>
                        <div class="rating-option">
                            <input type="radio" id="excel3" name="excel" value="3">
                            <label for="excel3">Gemiddeld</label>
                        </div>
                        <div class="rating-option">
                            <input type="radio" id="excel4" name="excel" value="4">
                            <label for="excel4">Gevorderd</label>
                        </div>
                        <div class="rating-option">
                            <input type="radio" id="excel5" name="excel" value="5">
                            <label for="excel5">Expert</label>
                        </div>
                    </div>
                </div>

                <div class="rating-field">
                    <span class="rating-label">Power BI / Tableau *</span>
                    <div class="rating-scale">
                        <div class="rating-option">
                            <input type="radio" id="powerbi1" name="powerbi" value="1" required>
                            <label for="powerbi1">Geen</label>
                        </div>
                        <div class="rating-option">
                            <input type="radio" id="powerbi2" name="powerbi" value="2">
                            <label for="powerbi2">Basis</label>
                        </div>
                        <div class="rating-option">
                            <input type="radio" id="powerbi3" name="powerbi" value="3">
                            <label for="powerbi3">Gemiddeld</label>
                        </div>
                        <div class="rating-option">
                            <input type="radio" id="powerbi4" name="powerbi" value="4">
                            <label for="powerbi4">Gevorderd</label>
                        </div>
                        <div class="rating-option">
                            <input type="radio" id="powerbi5" name="powerbi" value="5">
                            <label for="powerbi5">Expert</label>
                        </div>
                    </div>
                </div>

                <div class="rating-field">
                    <span class="rating-label">Python / R (data analyse, scripting) *</span>
                    <div class="rating-scale">
                        <div class="rating-option">
                            <input type="radio" id="python1" name="python" value="1" required>
                            <label for="python1">Geen</label>
                        </div>
                        <div class="rating-option">
                            <input type="radio" id="python2" name="python" value="2">
                            <label for="python2">Basis</label>
                        </div>
                        <div class="rating-option">
                            <input type="radio" id="python3" name="python" value="3">
                            <label for="python3">Gemiddeld</label>
                        </div>
                        <div class="rating-option">
                            <input type="radio" id="python4" name="python" value="4">
                            <label for="python4">Gevorderd</label>
                        </div>
                        <div class="rating-option">
                            <input type="radio" id="python5" name="python" value="5">
                            <label for="python5">Expert</label>
                        </div>
                    </div>
                </div>

                <div class="rating-field">
                    <span class="rating-label">Statistische analyse (regressie, correlatie, t-tests) *</span>
                    <div class="rating-scale">
                        <div class="rating-option">
                            <input type="radio" id="stats1" name="stats" value="1" required>
                            <label for="stats1">Geen</label>
                        </div>
                        <div class="rating-option">
                            <input type="radio" id="stats2" name="stats" value="2">
                            <label for="stats2">Basis</label>
                        </div>
                        <div class="rating-option">
                            <input type="radio" id="stats3" name="stats" value="3">
                            <label for="stats3">Gemiddeld</label>
                        </div>
                        <div class="rating-option">
                            <input type="radio" id="stats4" name="stats" value="4">
                            <label for="stats4">Gevorderd</label>
                        </div>
                        <div class="rating-option">
                            <input type="radio" id="stats5" name="stats" value="5">
                            <label for="stats5">Expert</label>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Section 4: BEDROM Kennistoets -->
            <div class="form-section">
                <div class="section-header">
                    <h2>4. BEDROM Kennistoets</h2>
                </div>

                <div class="section-description">
                    Beantwoord de volgende 3 vragen over externe analyse. Deze vragen zijn willekeurig geselecteerd uit 10 mogelijke vragen gebaseerd op BEDROM stof (Weeks 1-7).
                </div>

                <div id="bedromQuizContainer">
                    <!-- Questions will be dynamically inserted here by JavaScript -->
                </div>
            </div>

            <!-- Section 5: Werkstijl Voorkeur -->
            <div class="form-section">
                <div class="section-header">
                    <h2>5. Werkstijl Voorkeur</h2>
                </div>

                <div class="section-description">
                    Welke werkstijl past het beste bij jou? Dit helpt bij het bepalen van je rol (Management of Analist).
                </div>

                <div class="form-field">
                    <label>Mijn voorkeur gaat uit naar: *</label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" id="werkstijl_strategisch" name="werkstijl" value="strategisch" required>
                            <label for="werkstijl_strategisch">
                                <strong>Strategisch denken / Management focus</strong><br>
                                <small>Ik werk graag met business context, leiderschap, communicatie met stakeholders, en het vertalen van analyses naar beslissingen.</small>
                            </label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="werkstijl_analytisch" name="werkstijl" value="analytisch">
                            <label for="werkstijl_analytisch">
                                <strong>Analytisch / Technisch werk focus</strong><br>
                                <small>Ik werk graag met data, tools, modeling, en het uitvoeren van technische analyses.</small>
                            </label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="werkstijl_beide" name="werkstijl" value="beide">
                            <label for="werkstijl_beide">
                                <strong>Beide gelijkelijk</strong><br>
                                <small>Ik vind zowel strategisch denken als analytisch werk even interessant.</small>
                            </label>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Section 6: AI Tools Comfort -->
            <div class="form-section">
                <div class="section-header">
                    <h2>6. AI Tools Comfort & Tool Path Voorkeur</h2>
                </div>

                <div class="section-description">
                    In ECONAN kun je kiezen tussen twee tool paths: AI-Augmented (AI-tools zoals ChatGPT, Claude, e.d.) of Conventional (Power BI, Python, Excel). Beoordeel je comfort level met AI tools.
                </div>

                <div class="rating-field">
                    <span class="rating-label">AI-tools ervaring (zoals ChatGPT, Claude, e.d.) *</span>
                    <div class="rating-scale">
                        <div class="rating-option">
                            <input type="radio" id="ai_ervaring1" name="ai_ervaring" value="1" required>
                            <label for="ai_ervaring1">Geen</label>
                        </div>
                        <div class="rating-option">
                            <input type="radio" id="ai_ervaring2" name="ai_ervaring" value="2">
                            <label for="ai_ervaring2">Basis</label>
                        </div>
                        <div class="rating-option">
                            <input type="radio" id="ai_ervaring3" name="ai_ervaring" value="3">
                            <label for="ai_ervaring3">Regelmatig</label>
                        </div>
                        <div class="rating-option">
                            <input type="radio" id="ai_ervaring4" name="ai_ervaring" value="4">
                            <label for="ai_ervaring4">Veel</label>
                        </div>
                        <div class="rating-option">
                            <input type="radio" id="ai_ervaring5" name="ai_ervaring" value="5">
                            <label for="ai_ervaring5">Intensief</label>
                        </div>
                    </div>
                </div>

                <div class="rating-field">
                    <span class="rating-label">Prompt engineering vertrouwen *</span>
                    <div class="rating-scale">
                        <div class="rating-option">
                            <input type="radio" id="ai_confidence1" name="ai_confidence" value="1" required>
                            <label for="ai_confidence1">Laag</label>
                        </div>
                        <div class="rating-option">
                            <input type="radio" id="ai_confidence2" name="ai_confidence" value="2">
                            <label for="ai_confidence2">Matig</label>
                        </div>
                        <div class="rating-option">
                            <input type="radio" id="ai_confidence3" name="ai_confidence" value="3">
                            <label for="ai_confidence3">Gemiddeld</label>
                        </div>
                        <div class="rating-option">
                            <input type="radio" id="ai_confidence4" name="ai_confidence" value="4">
                            <label for="ai_confidence4">Hoog</label>
                        </div>
                        <div class="rating-option">
                            <input type="radio" id="ai_confidence5" name="ai_confidence" value="5">
                            <label for="ai_confidence5">Zeer hoog</label>
                        </div>
                    </div>
                </div>

                <div class="form-field">
                    <label>Mijn voorkeur voor tool path: *</label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" id="toolpath_ai" name="toolpath" value="ai" required>
                            <label for="toolpath_ai">
                                <strong>AI-Augmented Path</strong><br>
                                <small>AI-tools zoals ChatGPT, Claude, e.d., met prompt engineering voor data-analyse en modeling</small>
                            </label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="toolpath_conventional" name="toolpath" value="conventional">
                            <label for="toolpath_conventional">
                                <strong>Conventional Tools Path</strong><br>
                                <small>Power BI, Tableau, Python, R, Excel voor data-analyse</small>
                            </label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="toolpath_onzeker" name="toolpath" value="onzeker">
                            <label for="toolpath_onzeker">
                                <strong>Nog onzeker</strong><br>
                                <small>Ik weet nog niet welke path ik wil kiezen</small>
                            </label>
                        </div>
                    </div>
                </div>

                <div class="form-field">
                    <label for="toolpath_rationale">Toelichting op tool path voorkeur</label>
                    <textarea id="toolpath_rationale" name="toolpath_rationale" placeholder="Waarom kies je voor deze tool path? Wat trekt je aan? Welke ervaring heb je?"></textarea>
                </div>
            </div>

            <!-- Buttons -->
            <div class="button-group no-print">
                <button type="button" class="btn-primary" onclick="saveForm()">üíæ Opslaan</button>
                <button type="button" class="btn-secondary" onclick="window.print()">üñ®Ô∏è Print / Save as PDF</button>
                <button type="button" class="btn-danger" onclick="resetForm()">üîÑ Reset Formulier</button>
            </div>
        </form>

        <!-- Summary Section (Print Only) -->
        <div class="summary-section">
            <div class="section-header">
                <h2>Samenvatting Capability Assessment</h2>
            </div>

            <div class="section-description">
                Onderstaande samenvatting geeft een overzicht van je capabilities en aanbevelingen voor je rol en tool path.
            </div>

            <div id="summaryContent"></div>
        </div>
    </div>

    <script>
        // Auto-save on form change
        document.getElementById('capabilityForm').addEventListener('change', function() {
            autoSave();
        });

        // BEDROM Question Pool (10 questions)
        const BEDROM_QUESTIONS = [
            {
                id: 1,
                week: 1,
                question: "Welke macro-economische variabelen zijn het meest relevant voor de externe analyse van jouw sector? (selecteer er 3)",
                type: "multiple",
                options: ["BBP (Bruto Binnenlands Product)", "Inflatie", "Rente", "Werkgelegenheid", "Wisselkoersen", "Consumentenvertrouwen", "Export/Import"],
                minSelect: 3,
                maxSelect: 3,
                correctAnswers: ["BBP (Bruto Binnenlands Product)", "Consumentenvertrouwen", "Export/Import"]
            },
            {
                id: 2,
                week: 1,
                question: "Is jouw sector sterk conjunctuurgevoelig? Licht toe waarom wel/niet.",
                type: "text",
                placeholder: "Beschrijf in 2-3 zinnen..."
            },
            {
                id: 3,
                week: 2,
                question: "Welke marktvorm past het beste bij jouw sector?",
                type: "single",
                options: ["Volkomen concurrentie", "Monopolistische concurrentie", "Oligopolie", "Monopolie"]
            },
            {
                id: 4,
                week: 2,
                question: "Is de prijselasticiteit van vraag in jouw sector hoog of laag? Licht toe.",
                type: "text",
                placeholder: "Beschrijf in 2-3 zinnen..."
            },
            {
                id: 5,
                week: 3,
                question: "Zijn de kosten in jouw sector voornamelijk vast of variabel?",
                type: "single",
                options: ["Voornamelijk vaste kosten", "Voornamelijk variabele kosten", "50/50 verhouding", "Weet ik niet"]
            },
            {
                id: 6,
                week: 3,
                question: "Welke structuurkenmerken zijn het meest belangrijk in jouw sector? (selecteer er 3)",
                type: "multiple",
                options: ["Schaalvoordelen", "Innovatief gedrag", "Hoge toetredingsbarri√®res", "Netwerkeffecten", "Productdifferentiatie", "Kapitaalintensiteit"],
                minSelect: 3,
                maxSelect: 3
            },
            {
                id: 7,
                week: 4,
                question: "Wat zijn de belangrijkste maatschappelijke kosten (negatieve externaliteiten) in jouw sector?",
                type: "text",
                placeholder: "Beschrijf in 2-3 zinnen..."
            },
            {
                id: 8,
                week: 4,
                question: "Hoe zou True Pricing toegepast kunnen worden in jouw sector?",
                type: "text",
                placeholder: "Beschrijf in 2-3 zinnen..."
            },
            {
                id: 9,
                week: 5,
                question: "Welke ESG dimensies zijn het meest relevant voor jouw sector? (selecteer er 2)",
                type: "multiple",
                options: ["Environmental (milieu)", "Social (sociaal)", "Governance (bestuur)"],
                minSelect: 2,
                maxSelect: 2
            },
            {
                id: 10,
                week: 5,
                question: "Noem 2 concrete ESG-uitdagingen die jouw sector momenteel heeft.",
                type: "text",
                placeholder: "Beschrijf in 2-3 zinnen..."
            }
        ];

        // Auto-load on page load
        window.addEventListener('load', function() {
            initializeBedromQuiz();
            loadForm();
            setTodayDate();
            setupSectorAndersToggle();
        });

        function setupSectorAndersToggle() {
            const sectorSelect = document.getElementById('sector');
            const andersField = document.getElementById('sectorAndersField');
            const andersInput = document.getElementById('sector_anders');

            sectorSelect.addEventListener('change', function() {
                if (this.value === 'anders') {
                    andersField.style.display = 'block';
                    andersInput.required = true;
                } else {
                    andersField.style.display = 'none';
                    andersInput.required = false;
                    andersInput.value = '';
                }
            });

            // Trigger on load to show if "anders" was previously selected
            if (sectorSelect.value === 'anders') {
                andersField.style.display = 'block';
                andersInput.required = true;
            }
        }

        function initializeBedromQuiz() {
            // Check if questions were already selected (in sessionStorage)
            let selectedQuestions = sessionStorage.getItem('bedrom_selected_questions');

            if (!selectedQuestions) {
                // Shuffle and select 3 random questions
                const shuffled = [...BEDROM_QUESTIONS].sort(() => Math.random() - 0.5);
                selectedQuestions = shuffled.slice(0, 3).map(q => q.id);
                sessionStorage.setItem('bedrom_selected_questions', JSON.stringify(selectedQuestions));
            } else {
                selectedQuestions = JSON.parse(selectedQuestions);
            }

            // Render the selected questions
            const container = document.getElementById('bedromQuizContainer');
            selectedQuestions.forEach((questionId, index) => {
                const question = BEDROM_QUESTIONS.find(q => q.id === questionId);
                if (question) {
                    container.appendChild(renderBedromQuestion(question, index + 1));
                }
            });
        }

        function renderBedromQuestion(question, questionNumber) {
            const questionDiv = document.createElement('div');
            questionDiv.className = 'form-field';
            questionDiv.style.marginBottom = 'var(--space-6)';
            questionDiv.style.padding = 'var(--space-4)';
            questionDiv.style.backgroundColor = 'var(--color-gray-100)';
            questionDiv.style.borderRadius = 'var(--border-radius)';

            let questionHTML = `
                <label style="font-weight: 600; color: var(--color-gray-900); margin-bottom: var(--space-3); display: block;">
                    Vraag ${questionNumber} (Week ${question.week}): ${question.question}
                </label>
            `;

            if (question.type === 'single') {
                // Single choice radio buttons
                questionHTML += '<div class="radio-group">';
                question.options.forEach((option, optIndex) => {
                    const inputId = `bedrom_q${question.id}_opt${optIndex}`;
                    questionHTML += `
                        <div class="radio-option">
                            <input type="radio" id="${inputId}" name="bedrom_q${question.id}" value="${option}" required>
                            <label for="${inputId}">${option}</label>
                        </div>
                    `;
                });
                questionHTML += '</div>';
            } else if (question.type === 'multiple') {
                // Multiple choice checkboxes
                questionHTML += '<div style="display: flex; flex-direction: column; gap: var(--space-2);">';
                question.options.forEach((option, optIndex) => {
                    const inputId = `bedrom_q${question.id}_opt${optIndex}`;
                    questionHTML += `
                        <div style="display: flex; align-items: center; gap: var(--space-2); padding: var(--space-2); border: 1px solid var(--color-gray-300); border-radius: var(--border-radius);">
                            <input type="checkbox" id="${inputId}" name="bedrom_q${question.id}" value="${option}" style="width: 18px; height: 18px; cursor: pointer;">
                            <label for="${inputId}" style="cursor: pointer; flex-grow: 1;">${option}</label>
                        </div>
                    `;
                });
                questionHTML += '</div>';
                questionHTML += `<small style="color: var(--color-gray-600); margin-top: var(--space-2); display: block;">Selecteer minimaal ${question.minSelect} en maximaal ${question.maxSelect} opties</small>`;
            } else if (question.type === 'text') {
                // Text area
                questionHTML += `
                    <textarea id="bedrom_q${question.id}" name="bedrom_q${question.id}"
                              placeholder="${question.placeholder || ''}"
                              required
                              style="width: 100%; min-height: 100px; padding: var(--space-3); border: 1px solid var(--color-gray-300); border-radius: var(--border-radius); font-family: var(--font-family-body); font-size: var(--font-size-base);"></textarea>
                `;
            }

            questionDiv.innerHTML = questionHTML;

            // Add validation for multiple choice
            if (question.type === 'multiple') {
                const checkboxes = questionDiv.querySelectorAll(`input[name="bedrom_q${question.id}"]`);
                checkboxes.forEach(checkbox => {
                    checkbox.addEventListener('change', function() {
                        const checked = questionDiv.querySelectorAll(`input[name="bedrom_q${question.id}"]:checked`);
                        if (checked.length > question.maxSelect) {
                            this.checked = false;
                            showStatus(`Maximum ${question.maxSelect} opties toegestaan`, 'info');
                        }
                    });
                });
            }

            return questionDiv;
        }

        function setTodayDate() {
            const datumField = document.getElementById('datum');
            if (!datumField.value) {
                const today = new Date().toISOString().split('T')[0];
                datumField.value = today;
            }
        }

        function autoSave() {
            const formData = getFormData();
            const naam = document.getElementById('naam').value;

            if (naam) {
                const timestamp = Date.now();
                const key = `econan_capability_assessment_${naam}_${timestamp}`;
                localStorage.setItem(key, JSON.stringify({
                    ...formData,
                    timestamp: new Date().toISOString()
                }));

                // Store the latest key for this user
                localStorage.setItem(`econan_latest_${naam}`, key);
                showStatus('Automatisch opgeslagen', 'success');
            }
        }

        function saveForm() {
            const form = document.getElementById('capabilityForm');
            if (!form.checkValidity()) {
                form.reportValidity();
                return;
            }

            const formData = getFormData();
            const naam = document.getElementById('naam').value;

            if (!naam) {
                showStatus('Vul eerst een naam in', 'error');
                return;
            }

            const timestamp = Date.now();
            const key = `econan_capability_assessment_${naam}_${timestamp}`;
            localStorage.setItem(key, JSON.stringify({
                ...formData,
                timestamp: new Date().toISOString()
            }));

            localStorage.setItem(`econan_latest_${naam}`, key);
            generateSummary();
            showStatus('Formulier succesvol opgeslagen! Je kunt nu printen/PDF maken.', 'success');
        }

        function loadForm() {
            // Try to load based on naam if already filled
            const naamField = document.getElementById('naam');
            if (naamField.value) {
                const latestKey = localStorage.getItem(`econan_latest_${naamField.value}`);
                if (latestKey) {
                    const saved = localStorage.getItem(latestKey);
                    if (saved) {
                        const data = JSON.parse(saved);
                        setFormData(data);
                        showStatus('Eerder opgeslagen data geladen', 'info');
                    }
                }
            }

            // Listen for naam change to load data
            naamField.addEventListener('blur', function() {
                if (this.value) {
                    const latestKey = localStorage.getItem(`econan_latest_${this.value}`);
                    if (latestKey) {
                        const saved = localStorage.getItem(latestKey);
                        if (saved) {
                            const data = JSON.parse(saved);
                            setFormData(data);
                            showStatus('Eerder opgeslagen data voor deze naam geladen', 'info');
                        }
                    }
                }
            });
        }

        function getFormData() {
            const form = document.getElementById('capabilityForm');
            const formData = new FormData(form);
            const data = {};
            for (let [key, value] of formData.entries()) {
                data[key] = value;
            }
            return data;
        }

        function setFormData(data) {
            for (let key in data) {
                if (key === 'timestamp') continue;

                const element = document.querySelector(`[name="${key}"]`);
                if (element) {
                    if (element.type === 'radio') {
                        const radio = document.querySelector(`[name="${key}"][value="${data[key]}"]`);
                        if (radio) radio.checked = true;
                    } else {
                        element.value = data[key];
                    }
                }
            }
        }

        function resetForm() {
            if (confirm('Weet je zeker dat je alle data wilt wissen? Dit kan niet ongedaan worden gemaakt.')) {
                const naam = document.getElementById('naam').value;
                if (naam) {
                    const latestKey = localStorage.getItem(`econan_latest_${naam}`);
                    if (latestKey) {
                        localStorage.removeItem(latestKey);
                        localStorage.removeItem(`econan_latest_${naam}`);
                    }
                }

                document.getElementById('capabilityForm').reset();
                document.getElementById('summaryContent').innerHTML = '';
                showStatus('Formulier gereset', 'info');
            }
        }

        function calculateBedromScore(data) {
            // Get selected questions from sessionStorage
            const selectedQuestionIds = JSON.parse(sessionStorage.getItem('bedrom_selected_questions') || '[]');
            let totalScore = 0;

            selectedQuestionIds.forEach(questionId => {
                const question = BEDROM_QUESTIONS.find(q => q.id === questionId);
                if (!question) return;

                if (question.type === 'single') {
                    // Single choice: 1 point if answered
                    const answer = data[`bedrom_q${questionId}`];
                    if (answer) totalScore += 1;
                } else if (question.type === 'multiple') {
                    // Multiple choice: partial score based on selections
                    const answers = Object.keys(data)
                        .filter(key => key === `bedrom_q${questionId}`)
                        .map(key => data[key]);

                    // Count how many checkboxes were checked
                    const checkedCount = document.querySelectorAll(`input[name="bedrom_q${questionId}"]:checked`).length;

                    if (checkedCount >= question.minSelect) {
                        totalScore += 1;
                    } else if (checkedCount > 0) {
                        totalScore += 0.5;
                    }
                } else if (question.type === 'text') {
                    // Text answer: score based on length and quality
                    const answer = data[`bedrom_q${questionId}`];
                    if (answer && answer.trim().length > 0) {
                        const wordCount = answer.trim().split(/\s+/).length;
                        if (wordCount >= 20) {
                            totalScore += 1;
                        } else if (wordCount >= 10) {
                            totalScore += 0.7;
                        } else if (wordCount >= 5) {
                            totalScore += 0.4;
                        }
                    }
                }
            });

            // Convert 0-3 score to 1-5 scale
            const normalizedScore = (totalScore / 3) * 4 + 1;
            return Math.min(5, Math.max(1, normalizedScore));
        }

        function generateSummary() {
            const data = getFormData();

            // Calculate scores
            const dataAnalyseScore = (
                parseInt(data.excel || 0) +
                parseInt(data.powerbi || 0) +
                parseInt(data.python || 0) +
                parseInt(data.stats || 0)
            ) / 4;

            // Calculate BEDROM score from quiz answers
            const bedromKennisScore = calculateBedromScore(data);

            const aiComfortScore = (
                parseInt(data.ai_ervaring || 0) +
                parseInt(data.ai_confidence || 0)
            ) / 2;

            // Role recommendation
            let roleRecommendation = '';
            if (data.werkstijl === 'strategisch') {
                roleRecommendation = '<strong>Management C-Suite</strong> - Je voorkeur ligt bij strategisch denken en leiderschap.';
            } else if (data.werkstijl === 'analytisch') {
                roleRecommendation = '<strong>Analist</strong> - Je voorkeur ligt bij analytisch en technisch werk.';
            } else {
                if (dataAnalyseScore >= 3.5) {
                    roleRecommendation = '<strong>Analist</strong> - Je hebt sterke data-analyse vaardigheden die goed passen bij de Analist rol.';
                } else if (bedromKennisScore >= 4) {
                    roleRecommendation = '<strong>Management C-Suite</strong> - Je sterke BEDROM kennis past goed bij de Management rol.';
                } else {
                    roleRecommendation = '<strong>Bespreek met team</strong> - Beide rollen zouden goed kunnen passen. Bespreek je voorkeur met je team.';
                }
            }

            // Tool path recommendation
            let toolpathRecommendation = '';
            if (data.toolpath === 'ai') {
                toolpathRecommendation = 'AI-Augmented Path - Je hebt gekozen voor AI tools.';
            } else if (data.toolpath === 'conventional') {
                toolpathRecommendation = 'Conventional Tools Path - Je hebt gekozen voor traditionele tools.';
            } else {
                if (aiComfortScore >= 4 && dataAnalyseScore < 3) {
                    toolpathRecommendation = '<strong>Aanbeveling: AI-Augmented Path</strong> - Je hebt meer comfort met AI tools dan met traditionele data-analyse tools.';
                } else if (dataAnalyseScore >= 4) {
                    toolpathRecommendation = '<strong>Aanbeveling: Conventional Tools Path</strong> - Je hebt sterke vaardigheden in traditionele data-analyse tools.';
                } else {
                    toolpathRecommendation = '<strong>Aanbeveling: AI-Augmented Path</strong> - AI tools kunnen je helpen om snel op te schalen in data-analyse.';
                }
            }

            const summary = `
                <div style="margin-bottom: 24px;">
                    <h3 style="color: var(--color-primary-700); margin-bottom: 8px;">Persoonlijk</h3>
                    <p><strong>Voornaam:</strong> ${data.naam || '-'}</p>
                    <p><strong>Sector:</strong> ${getSectorName(data.sector, data.sector_anders)}</p>
                    <p><strong>Datum:</strong> ${data.datum || '-'}</p>
                </div>

                <div style="margin-bottom: 24px;">
                    <h3 style="color: var(--color-primary-700); margin-bottom: 8px;">Capability Scores</h3>
                    <p><strong>Data-Analyse Ervaring:</strong> ${dataAnalyseScore.toFixed(1)}/5 ${getScoreBar(dataAnalyseScore)}</p>
                    <p style="font-size: 14px; margin-left: 20px; color: var(--color-gray-600);">
                        Excel: ${data.excel}/5, Power BI: ${data.powerbi}/5, Python/R: ${data.python}/5, Statistiek: ${data.stats}/5
                    </p>

                    <p style="margin-top: 12px;"><strong>BEDROM Sector Kennis (Quiz Score):</strong> ${bedromKennisScore.toFixed(1)}/5 ${getScoreBar(bedromKennisScore)}</p>
                    <p style="font-size: 14px; margin-left: 20px; color: var(--color-gray-600);">
                        Gebaseerd op kennistoets met 3 willekeurige vragen uit BEDROM stof (Weeks 1-7)
                    </p>

                    <p style="margin-top: 12px;"><strong>AI Tools Comfort:</strong> ${aiComfortScore.toFixed(1)}/5 ${getScoreBar(aiComfortScore)}</p>
                    <p style="font-size: 14px; margin-left: 20px; color: var(--color-gray-600);">
                        AI Ervaring: ${data.ai_ervaring}/5, Prompt Engineering: ${data.ai_confidence}/5
                    </p>
                </div>

                <div style="margin-bottom: 24px;">
                    <h3 style="color: var(--color-primary-700); margin-bottom: 8px;">Werkstijl Voorkeur</h3>
                    <p>${getWerkstijlLabel(data.werkstijl)}</p>
                </div>

                <div style="background-color: var(--color-primary-50); padding: 16px; border-radius: 8px; margin-bottom: 24px;">
                    <h3 style="color: var(--color-primary-700); margin-bottom: 8px;">üéØ Rol Aanbeveling</h3>
                    <p>${roleRecommendation}</p>
                </div>

                <div style="background-color: var(--color-info-600); color: white; padding: 16px; border-radius: 8px; margin-bottom: 24px;">
                    <h3 style="margin-bottom: 8px;">üõ†Ô∏è Tool Path Aanbeveling</h3>
                    <p>${toolpathRecommendation}</p>
                    ${data.toolpath_rationale ? `<p style="margin-top: 12px; font-style: italic;">"${data.toolpath_rationale}"</p>` : ''}
                </div>

                <div style="font-size: 12px; color: var(--color-gray-600); margin-top: 24px;">
                    <p><strong>Let op:</strong> Deze aanbevelingen zijn indicatief. Bespreek je rol en tool path met je team in Week 1 sessie. Je mag altijd een andere keuze maken die beter bij je past.</p>
                </div>
            `;

            document.getElementById('summaryContent').innerHTML = summary;
        }

        function getSectorName(value, andersValue) {
            const sectors = {
                'retail': 'Retail (Fashion & Consumer Goods)',
                'energy': 'Energy (Oil & Gas, Renewable)',
                'finance': 'Financial Services (Banking, Insurance)',
                'healthcare': 'Healthcare (Pharmaceuticals, Biotech)',
                'manufacturing': 'Manufacturing (Automotive)',
                'food': 'Food & Beverage (Consumer Goods)',
                'tech': 'Technology (SaaS, Cloud)',
                'realestate': 'Real Estate (Commercial REITs)',
                'anders': andersValue || 'Anders (niet gespecificeerd)'
            };
            return sectors[value] || value;
        }

        function getWerkstijlLabel(value) {
            const labels = {
                'strategisch': 'Strategisch denken / Management focus',
                'analytisch': 'Analytisch / Technisch werk focus',
                'beide': 'Beide gelijkelijk'
            };
            return labels[value] || value;
        }

        function getScoreBar(score) {
            const filled = Math.round(score);
            const empty = 5 - filled;
            return '‚óè'.repeat(filled) + '‚óã'.repeat(empty);
        }

        function showStatus(message, type) {
            const statusEl = document.getElementById('statusMessage');
            statusEl.textContent = message;
            statusEl.className = `status-message status-${type} no-print`;
            statusEl.style.display = 'block';

            setTimeout(() => {
                statusEl.style.display = 'none';
            }, 5000);
        }

        // Before print, generate summary
        window.addEventListener('beforeprint', function() {
            generateSummary();
        });
    </script>
</body>
</html>
